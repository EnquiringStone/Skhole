{% extends '::base.html.twig' %}
{% block title %}{% trans %}Berichten{% endtrans %}{% endblock %}
{% block body %}
    {% include ':elements:dashboard.navigation.menu.html.twig' %}
    {% include ':panels/dashboard:messages.panel.html.twig' %}
    {% include ':panels/general:commercial.panel.html.twig' %}
    {% include ':elements:loader.html.twig' %}
{% endblock %}

{% block modals %}
    {% include ':modal/dashboard:messages.remove.modal.html.twig' with{'modalId' : 'removeMessagesModal'} %}
    {#TODO translate exception message#}
    {% include ':modal/exception:exception.modal.html.twig' with {'modalId' : 'exceptionNoneSelected', 'exceptionMessage': 'Er moet minimaal 1 item geselecteerd zijn'} %}
{% endblock %}

{% block prescripts %}
    <script src="{{ asset('js/dashboard/messages.js') }}"></script>
{% endblock %}
{% block postscripts %}
    <script>
        $(document).ready(function() {
            sendAjaxCall('{{url("app_home_ajax_page")}}', {'method': 'getMessageModals', 'ajax_key': 'MAS1', 'offset': {{ offset }}, 'limit': {{ limit }}, 'sortAttribute': 'sendDateTime', 'sortValue': 'DESC', 'context': 'SELF'},
                    function(args) {
                        $('.message-modals').append(args['html']);
                    }, function(message) {

                    });
        });
    </script>
{% endblock %}

{% set menu = 'home' %}
{% set subMenu = 'dashboard' %}